<div class="container">
  <div class="row">
    <h1 class="text-center my-5">CREATE NEW USERS</h1>
    <div class="col-md-12 py-2">
      <div class="row p-2 d-flex" style="align-items: center">
        <label class="col-md-2">First name: </label>
        <input
          class="col-md-10 p-2"
          type="text"
          name="firstName"
          id="firstName"
          placeholder="First name"
        />
      </div>

      <div class="row p-2 d-flex" style="align-items: center">
        <label class="col-md-2">Last name: </label>
        <input
          class="col-md-10 p-2"
          type="text"
          name="lastName"
          id="lastName"
          placeholder="Last name"
        />
      </div>

      <div class="row p-2 d-flex" style="align-items: center">
        <label class="col-md-2">Username: </label>
        <input
          class="col-md-10 p-2"
          type="text"
          name="username"
          id="username"
          placeholder="Username"
        />

      </div>
      <div class="row p-2 d-flex" style="align-items: center">
        <label class="col-md-2">Password: </label>
        <input
          class="col-md-10 p-2"
          type="password"
          name="password"
          id="password"
          placeholder="Password"
        />
      </div>

      <div class="row p-2 d-flex" style="align-items: center">
        <label class="col-md-2">Email: </label>
        <input
          class="col-md-10 p-2"
          type="text"
          name="email"
          id="email"
          placeholder="Email"
        />
      </div>

      <div class="row p-2 d-flex" style="align-items: center">
        <label class="col-md-2">Phone number: </label>
        <input
          class="col-md-10 p-2"
          type="text"
          name="phoneNumber"
          id="phoneNumber"
          placeholder="Phone number"
        />
      </div>

      <div class="row p-2 d-flex" style="align-items: center">
        <label class="col-md-2">Address: </label>
        <input
          class="col-md-10 p-2"
          type="text"
          name="address"
          id="address"
          placeholder="Address"
        />
      </div>
      <div class="row p-2">
        <div class="col-md-2"></div>
        <button class="btn btn-secondary col-md-5 p-2" onclick="clearInput()" > Clear</button>
        <button class="btn btn-primary col-md-5 p-2" onclick="createUser()" >Create</button>
      </div>
    </div>
  </div>
</div>

<script>
    const firstName = document.getElementById('firstName');
    const lastName = document.getElementById('lastName');
    const username = document.getElementById('username');
    const password = document.getElementById('password');
    const email = document.getElementById('email');
    const phoneNumber = document.getElementById('phoneNumber');
    const address = document.getElementById('address');

    function clearInput () {
        firstName.value = '';
        lastName.value = '';
        username.value = '';
        password.value = '';
        email.value = '';
        phoneNumber.value = '';
        address.value = '';
        firstName.focus();    
    }

     async function createUser () {
        const data = {
            idUser: "U" + Math.floor(Math.random() * 100000),
            nameUser: lastName.value + ' ' + firstName.value,
            username: username.value,
            password: password.value,
            email: email.value,
            address: address.value,
            phoneNumber: phoneNumber.value,
        }

        const response = await fetch('/admin/users', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({...data}),
        }).then(res => res.json())
        .then(res => res);
            console.log (response.success);

        if (response.success === 1) {
            alert('Create user successfully');
            clearInput();
        } else {
            alert('Create user failed');
        }
    }
</script>